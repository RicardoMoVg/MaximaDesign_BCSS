@page "/Storage_dashboard"
@rendermode InteractiveServer
@using MaximaDesignSystem
@using MaximaDesignSystem.MB_Library
@inject NavigationManager Navigation

<div class="dashboard-container">

    <div class="row g-4 mb-4">
        
        <div class="col-lg-5">
            <div class="d-flex justify-content-end mb-2">
                <span class="badge bg-dark rounded-pill px-3 py-2">Atajos a Operaciones Frecuentes</span>
            </div>
            
            <div class="shortcuts-grid">
                <button class="card white-card shortcut-btn">
                    <div class="icon-container"><i class="bi bi-box-seam fs-1"></i></div>
                    <span class="text-center lh-sm mt-2">Proceso de<br>entrada</span>
                </button>
                <button class="card white-card shortcut-btn">
                    <div class="icon-container"><i class="bi bi-cart-check fs-1"></i></div>
                    <span class="text-center lh-sm mt-2">Proceso de<br>salida</span>
                </button>
                <button class="card white-card shortcut-btn">
                    <div class="icon-container"><i class="bi bi-file-earmark-text fs-1"></i></div>
                    <span class="text-center lh-sm mt-2">Gestionar<br>Envíos</span>
                </button>
                <button class="card white-card shortcut-btn">
                    <div class="icon-container"><i class="bi bi-search fs-1"></i></div>
                    <span class="text-center lh-sm mt-2">Buscar<br>Guía</span>
                </button>
            </div>
        </div>

        <div class="col-lg-7">
            
            <div class="mb-4">
                <div class="d-flex justify-content-between align-items-end mb-1 px-1">
                    <span class="text-muted small text-uppercase letter-spacing">Productos por procesar</span>
                    <span class="fs-2 fw-light">27</span>
                </div>
                <div class="card white-card p-0 overflow-hidden shadow-sm">
                    <table class="table table-sm table-borderless mb-0 small">
                        <thead class="bg-dark text-white">
                            <tr>
                                <th class="ps-3 fw-normal">Nombre del Producto</th>
                                <th class="text-center fw-normal">Instancia Física</th>
                                <th class="text-center fw-normal">ASIN</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach(var item in ProductosPorProcesar)
                            {
                                <tr class="border-bottom">
                                    <td class="ps-3 text-muted">@item.Nombre</td>
                                    <td class="text-center text-dark fw-bold">@item.Instancia</td>
                                    <td class="text-center text-muted">@item.ASIN</td>
                                    <td class="pe-2 text-end"><button class="btn btn-dark btn-sm p-0 px-1"><i class="bi bi-chevron-right"></i></button></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>

            <div>
                <div class="d-flex justify-content-between align-items-end mb-1 px-1">
                    <span class="text-muted small text-uppercase letter-spacing">En Tránsito</span>
                    <span class="fs-2 fw-light">89</span>
                </div>
                <div class="card white-card p-0 overflow-hidden shadow-sm">
                    <table class="table table-sm table-borderless mb-0 small">
                        <thead class="bg-dark text-white">
                            <tr>
                                <th class="ps-3 fw-normal">Nombre del Producto</th>
                                <th class="text-center fw-normal">Instancia Virtual</th>
                                <th class="text-center fw-normal">ASIN</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach(var item in EnTransito)
                            {
                                <tr class="border-bottom">
                                    <td class="ps-3 text-muted">@item.Nombre</td>
                                    <td class="text-center text-dark fw-bold">@item.Instancia</td>
                                    <td class="text-center text-muted">@item.ASIN</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <div class="row g-4 h-100">
        
        <div class="col-lg-5">
            <h6 class="text-secondary mb-3 fw-light fs-5">Estatus de Inventario Físico</h6>
            <div class="card white-card h-100 p-4 position-relative">
                
                <div class="position-absolute top-0 end-0 mt-4 me-4 text-center shadow-sm bg-white p-2 rounded border">
                    <div class="text-muted x-small">Sin Ubicación</div>
                    <div class="fs-4 fw-bold">27</div>
                </div>
                <div class="position-absolute top-0 end-0 mt-5 pt-5 me-4 text-center shadow-sm bg-white p-2 rounded border" style="top: 20px;">
                    <div class="text-muted x-small">Por Caducar</div>
                    <div class="fs-4 fw-bold">12</div>
                </div>

                <div class="d-flex justify-content-center align-items-center py-4">
                    <div class="donut-chart position-relative">
                        <div class="center-text text-center">
                            <h2 class="fw-bold m-0">1,231</h2>
                            <small class="text-muted">Items Totales</small>
                        </div>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between small text-muted px-4">
                    <span><i class="bi bi-circle-fill text-success me-1"></i> 52% en Auditoría</span>
                    <span><i class="bi bi-circle-fill text-warning me-1"></i> 20% Reservados</span>
                </div>
            </div>
        </div>

        <div class="col-lg-7">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h6 class="text-secondary fw-light fs-5 m-0">Actividad Reciente</h6>
                <div class="small">
                    <span class="me-3"><i class="bi bi-square-fill text-dark me-1"></i> Entradas</span>
                    <span><i class="bi bi-square-fill text-success me-1"></i> Salidas</span>
                </div>
            </div>
            
            <div class="card white-card h-100 p-4 d-flex flex-column justify-content-end">
                <div class="chart-area flex-grow-1 position-relative border-bottom border-start">
                    
                    <svg class="chart-line" viewBox="0 0 100 50" preserveAspectRatio="none">
                        <polyline fill="none" stroke="#212529" stroke-width="0.5" points="0,15 15,35 30,30 45,25 60,35 75,45 90,40 100,15" />
                    </svg>
                    
                    <svg class="chart-line" viewBox="0 0 100 50" preserveAspectRatio="none">
                        <polyline fill="none" stroke="#198754" stroke-width="0.5" points="0,35 15,33 30,35 45,30 60,15 75,10 90,10 100,20" />
                    </svg>

                    <div class="position-absolute w-100 border-top" style="top: 25%; border-color: #eee !important; border-style: dashed !important;"></div>
                    <div class="position-absolute w-100 border-top" style="top: 50%; border-color: #eee !important; border-style: dashed !important;"></div>
                    <div class="position-absolute w-100 border-top" style="top: 75%; border-color: #eee !important; border-style: dashed !important;"></div>
                </div>
                
                <div class="d-flex justify-content-between text-muted x-small mt-2 px-2">
                    <span>Lunes</span><span>Martes</span><span>Miércoles</span><span>Jueves</span><span>Viernes</span><span>Sábado</span><span>Domingo</span>
                </div>
            </div>
        </div>

    </div>
</div>

@code {
    public class ItemProceso
    {
        public string Nombre { get; set; } = "################";
        public string Instancia { get; set; } = "";
        public string ASIN { get; set; } = "";
    }

    private List<ItemProceso> ProductosPorProcesar = new()
    {
        new ItemProceso { Instancia = "MX011754", ASIN = "INV0001" },
        new ItemProceso { Instancia = "MX011755", ASIN = "INV0002" },
        new ItemProceso { Instancia = "MX011756", ASIN = "INV0003" },
        new ItemProceso { Instancia = "MX011757", ASIN = "INV0004" }
    };

    private List<ItemProceso> EnTransito = new()
    {
        new ItemProceso { Instancia = "VL00011754", ASIN = "INV0021" },
        new ItemProceso { Instancia = "VL00011754", ASIN = "INV0032" },
        new ItemProceso { Instancia = "VL00011754", ASIN = "INV0043" },
        new ItemProceso { Instancia = "VL00011754", ASIN = "INV0054" }
    };
}